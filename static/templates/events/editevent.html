<div class="modal-header">
    <button ng-click="vm.cancel()" class="close">Ã—</button>
    <h3 class="modal-title">Event</h3>
</div>
<div class="modal-body">
    <div class="alert alert-danger" ng-show="vm.error" ng-bind="vm.error"></div>

    <div class="row">
        <div class="col-md-6">
            <div class="form-group">
                <label for="reference_id">Reference ID</label>
                <input type="text" class="form-control" id="reference_id" ng-model="vm.event.reference_id"
                       placeholder="Reference to another system"/>
            </div>
        </div>
        <div class="col-md-6">
            <div class="form-group">
                <label for="name">Name</label>
                <input type="text" class="form-control" id="name" ng-model="vm.event.name"/>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6">
            <div class="form-group">
                <label>Movable(s)</label>
                <ui-select multiple='true' ng-model="vm.movables_selected"
                           theme="select2" ng-disabled="disabled" style="width: 100%">
                    <ui-select-match placeholder="Select movable(s) to check for event or leave empty for all...">
                        {{$item.name}}</ui-select-match>
                    <ui-select-choices
                            repeat="movable in vm.movables | propsFilter: {name: $select.search, reference_id: $select.search} track by movable.id">
                        <div ng-bind-html="movable.name | highlight: $select.search"></div>
                        <small ng-bind-html="movable.reference_id | highlight: $select.search"/>
                    </ui-select-choices>
                </ui-select>
            </div>
        </div>
        <div class="col-md-6">
            <div class="form-group">
                <label>Place(s)</label>
                <ui-select multiple='true' ng-model="vm.places_selected"
                           theme="select2" ng-disabled="disabled" style="width: 100%;">
                    <ui-select-match placeholder="Select place(s) to check for event of leave empty for all...">
                        {{$item.name}}</ui-select-match>
                    <ui-select-choices
                            repeat="place in vm.places | propsFilter: {name: $select.search, reference_id: $select.search} track by place.id">
                        <div ng-bind-html="place.name | highlight: $select.search"></div>
                        <small ng-bind-html="place.reference_id | highlight: $select.search"/>
                    </ui-select-choices>
                </ui-select>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6">
            <div class="form-group">
                <label for="schedule_days_of_week">Days of week</label><br/><br/><br/>
                <table class="text-justify" style="width: 100%;">
                    <tr>
                        <td class="text-center"><input type="checkbox" ng-model="vm.schedule_monday"/></td>
                        <td class="text-center"><input type="checkbox" ng-model="vm.schedule_tuesday"/></td>
                        <td class="text-center"><input type="checkbox" ng-model="vm.schedule_wednesday"/></td>
                        <td class="text-center"><input type="checkbox" ng-model="vm.schedule_thursday"/></td>
                        <td class="text-center"><input type="checkbox" ng-model="vm.schedule_friday"/></td>
                        <td class="text-center"><input type="checkbox" ng-model="vm.schedule_saturday"/></td>
                        <td class="text-center"><input type="checkbox" ng-model="vm.schedule_sunday"/></td>
                    </tr>
                    <tfoot>
                    <td class="text-center">Mon</td>
                    <td class="text-center">Tue</td>
                    <td class="text-center">Wed</td>
                    <td class="text-center">Thu</td>
                    <td class="text-center">Fri</td>
                    <td class="text-center">Sat</td>
                    <td class="text-center">Sun</td>
                    </tfoot>
                </table>
            </div>
        </div>
        <div class="col-xs-6 col-md-3">
            <div class="form-group text-justify" style="width: 100%;">
                <label>From:</label><br/>
                <timepicker ng-model="vm.schedule_start_time" hour-step="1" minute-step="15"
                            show-meridian="false"></timepicker>
            </div>
        </div>
        <div class="col-xs-6 col-md-3">
            <div class="form-group text-justify">
                <label for="schedule_end_time">To:</label><br/>
                <timepicker ng-model="vm.schedule_end_time" hour-step="1" minute-step="15"
                            show-meridian="false"></timepicker>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-xs-4 col-md-4">
            <div class="form-group">
                <label for="sighting_is_current">Is Sighting Current?</label><br/>
                <input type="checkbox" id="sighting_is_current" ng-model="vm.event.sighting_is_current"/>
            </div>
        </div>
        <div class="col-xs-4 col-md-4">
            <div class="form-group">
                <label for="sighting_has_comment">Has comment?</label><br/>
                <input type="checkbox" id="sighting_has_comment" ng-model="vm.event.sighting_has_comment"/>
            </div>
        </div>
        <div class="col-xs-4 col-md-4">
            <div class="form-group">
                <label for="sighting_has_been_confirmed">Was confirmed?</label><br/>
                <input type="checkbox" id="sighting_has_been_confirmed"
                       ng-model="vm.event.sighting_has_been_confirmed"/>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-xs-4 col-md-4">
            <div class="form-group">
                <label for="sighting_duration_in_seconds">Duration (sec)</label><br/>
                <input type="number" class="form-control" id="sighting_duration_in_seconds"
                       ng-model="vm.event.sighting_duration_in_seconds"/>
            </div>
        </div>
        <div class="col-xs-4 col-md-4">
            <div class="form-group">
                <label for="sighting_has_battery_below">Battery below (%)</label><br/>
                <input type="number" class="form-control" id="sighting_has_battery_below"
                       ng-model="vm.event.sighting_has_battery_below"/>
            </div>
        </div>
        <div class="col-xs-4 col-md-4">
            <div class="form-group">
                <label>Previous Event Ocurrence</label>
                <ui-select ng-model="vm.event.sighting_previous_event_occurrence" theme="bootstrap" ng-disabled="disabled">
                    <ui-select-match placeholder="Select or search for an event...">
                        {{ $select.selected.name }}
                    </ui-select-match>
                    <ui-select-choices null-option="vm.nullEventOption" loose-null
                            repeat="event in vm.events | propsFilter: {name: $select.search, reference_id: $select.search}">
                        <div ng-bind-html="event.name  | highlight: $select.search"></div>
                        <small ng-bind-html="event.reference_id | highlight: $select.search"/>
                    </ui-select-choices>
                </ui-select>
            </div>
        </div>
    </div>

    <div class="row text-center">
        <h3 class="text-center">Actions</h3>
    </div>

    <div class="row">
        <div class="col-md-offset-1 col-md-10">
            <div class="form-group">
                <ul rn-carousel rn-carousel-controls rn-carousel-index="vm.actions_index" class="custom-carousel">
                    <li>
                        <div class="col-md-12">
                            <div class="form-group text-center">
                                <label>Send a SMS</label>
                            </div>
                        </div>
                        <div class="col-md-12">
                            <div class="form-group">
                                <label for="action_sms_recipients">Recipient(s)</label>
                                <input type="text" class="form-control" id="action_sms_recipients"
                                       ng-model="vm.action_sms_recipients"
                                       placeholder="Example: +351961230101;+353833210202"/>
                            </div>
                        </div>
                        <div class="col-md-12">
                            <div class="form-group">
                                <label for="action_sms_message">Message</label>
                                <textarea class="form-control" id="action_sms_message" ng-model="vm.action_sms_message">
                                </textarea>
                                <small>Note: The following tags can be used: %event_id%, %event_name%, %movable_id%,
                                    %movable_name%, %place_id%, %place_name%.
                                </small>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="col-md-12">
                            <div class="form-group text-center">
                                <label>Send an Email</label>
                            </div>
                        </div>
                        <div class="col-md-12">
                            <div class="form-group">
                                <label for="action_email_recipients">Recipient(s)</label>
                                <input type="text" class="form-control" id="action_email_recipients"
                                       ng-model="vm.action_email_recipients"
                                       placeholder="Example: abc@ivigilate.com;xyz@email.com"/>
                            </div>
                        </div>
                        <div class="col-md-12">
                            <div class="form-group">
                                <label for="action_email_subject">Subject</label>
                                <input type="text" class="form-control" id="action_email_subject"
                                       ng-model="vm.action_email_subject"/>
                            </div>
                        </div>
                        <div class="col-md-12">
                            <div class="form-group">
                                <label for="action_email_message">Message</label>
                                <textarea class="form-control" id="action_email_message"
                                          ng-model="vm.action_email_message">
                                </textarea>
                                <small>Note: The following tags can be used: %event_id%, %event_name%, %movable_id%,
                                    %movable_name%, %place_id%, %place_name%.
                                </small>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="col-md-12">
                            <div class="form-group text-center">
                                <label>Call a REST webservice</label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="action_rest_uris">WebService URI</label>
                                <input type="text" class="form-control" id="action_rest_uris"
                                       ng-model="vm.action_rest_uris"
                                       placeholder="http://myservername.com/api/dosomething"/>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="action_rest_method">HTTP Method</label>
                                <select class="form-control" id="action_rest_method"
                                        ng-model="vm.action_rest_method">
                                    <option value="GET" selected>GET</option>
                                    <option value="POST">POST</option>
                                    <option value="PUT">PUT</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-12">
                            <div class="form-group">
                                <label for="action_rest_body">Body</label>
                                <textarea class="form-control" id="action_rest_body" ng-model="vm.action_rest_body">
                                </textarea>
                                <small>Note: The following tags can be used: %event_id%, %event_name%, %movable_id%,
                                    %movable_name%, %place_id%, %place_name%.
                                </small>
                            </div>
                        </div>
                    </li>
                </ul>
                <div class="custom-carousel-indicator" rn-carousel-indicators slides="[{},{},{}]"
                     rn-carousel-index="vm.actions_index"></div>
                <div class="text-center">
                    <small>(swipe left or right to configure available actions)</small>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal-footer">
    <button ng-click="vm.cancel()" class="btn btn-default">Cancel</button>
    <button ng-click="vm.save()" class="btn btn-primary">Save</button>
</div>